webpackJsonp([5],{"4lTM":function(e,t){},xVOn:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("Xxa5"),r=s.n(o),a=s("exGp"),n=s.n(a),i=s("gyMJ"),l={name:"Register",data:function(){return{start:!1,type:0,email:"",code:null,student_id:"",password:""}},methods:{goBack:function(){this.$router.go(-1)},goLogin:function(){this.$router.replace("/login")},register:function(){var e=this;return n()(r.a.mark(function t(){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.$refs.emailInput.valid&&e.code&&e.password)){t.next=8;break}return e.code=Number(e.code),t.next=4,Object(i.b)(e.type,e.email,e.code,e.student_id,e.password);case 4:0===(s=t.sent).error_code?(e.$dialog.toast({mes:"注册成功!请登录",icon:"success",timeout:1e3}),setTimeout(function(){e.$router.replace("/login")},1e3),e.start=!1,e.email="",e.code=null,e.student_id="",e.password=""):e.$dialog.toast({mes:s.error_msg,icon:"error",timeout:1e3}),t.next=9;break;case 8:e.$dialog.toast({mes:"请确认输入框内容是否规范",icon:"none",timeout:1e3});case 9:case"end":return t.stop()}},t,e)}))()},sendCode:function(){var e=this;return n()(r.a.mark(function t(){var s;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.emailInput.valid){t.next=11;break}return e.$dialog.loading.open("发送中..."),t.next=4,Object(i.h)(e.email);case 4:s=t.sent,console.log(s),e.start=!0,e.$dialog.loading.close(),0===s.error_code?e.$dialog.toast({mes:"已发送",icon:"success",timeout:1e3}):2001===s.error_code&&e.$dialog.toast({mes:s.error_msg,icon:"none",timeout:1e3}),t.next=12;break;case 11:e.$dialog.toast({mes:"邮箱"+e.$refs.emailInput.errorMsg,icon:"error",timeout:1e3});case 12:case"end":return t.stop()}},t,e)}))()}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"register-container"},[s("div",{staticClass:"back-icon",on:{click:e.goBack}},[e._m(0)]),e._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[e._v("邮箱：")]),e._v(" "),s("yd-input",{ref:"emailInput",attrs:{slot:"right",required:"",debug:!0,regex:"email",placeholder:"请输入邮箱"},slot:"right",model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[e._v("邮箱验证码：")]),e._v(" "),s("yd-input",{attrs:{slot:"right",required:"",placeholder:"请输入邮箱验证码"},slot:"right",model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),e._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[e._v("学号：")]),e._v(" "),s("yd-input",{attrs:{slot:"right",placeholder:"非必填项"},slot:"right",model:{value:e.student_id,callback:function(t){e.student_id=t},expression:"student_id"}})],1),e._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[e._v("密码：")]),e._v(" "),s("yd-input",{attrs:{slot:"right",type:"password",placeholder:"请输入密码"},slot:"right",model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),s("div",{staticClass:"code-btn"},[s("yd-sendcode",{attrs:{type:"warning","init-str":"获取验证码",size:"large",second:"60","run-str":"{%s}秒后重新获取"},nativeOn:{click:function(t){return e.sendCode(t)}},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}})],1),e._v(" "),s("div",{staticClass:"post-btn"},[s("mt-button",{attrs:{type:"primary",size:"large"},on:{click:e.register}},[e._v("注册")])],1),e._v(" "),s("div",{staticClass:"gologin",on:{click:e.goLogin}},[e._v("立即登录")])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i",{staticClass:"mui-icon mui-icon-back"})])}]};var d=s("VU/8")(l,c,!1,function(e){s("4lTM")},"data-v-da4cb120",null);t.default=d.exports}});
//# sourceMappingURL=5.8e44176faa1e7ca69133.js.map