webpackJsonp([7],{dqVt:function(t,e){},xVOn:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("Xxa5"),r=s.n(o),a=s("exGp"),n=s.n(a),i=s("gyMJ"),l={name:"Register",data:function(){return{start:!1,type:0,email:"",code:null,student_id:"",password:""}},methods:{goBack:function(){this.$router.go(-1)},goLogin:function(){this.$router.replace("/login")},register:function(){var t=this;return n()(r.a.mark(function e(){var s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.$refs.emailInput.valid&&t.code&&t.password)){e.next=8;break}return t.code=Number(t.code),e.next=4,Object(i.b)(t.type,t.email,t.code,t.student_id,t.password);case 4:0===(s=e.sent).error_code?(t.$dialog.toast({mes:"注册成功!请登录",icon:"success",timeout:1e3}),setTimeout(function(){t.$router.replace("/login")},1e3),t.start=!1,t.email="",t.code=null,t.student_id="",t.password=""):t.$dialog.toast({mes:s.error_msg,icon:"error",timeout:1e3}),e.next=9;break;case 8:t.$dialog.toast({mes:"请确认输入框内容是否规范",icon:"none",timeout:1e3});case 9:case"end":return e.stop()}},e,t)}))()},sendCode:function(){var t=this;return n()(r.a.mark(function e(){var s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.emailInput.valid){e.next=11;break}return t.$dialog.loading.open("发送中..."),e.next=4,Object(i.h)(t.email);case 4:s=e.sent,console.log(s),t.start=!0,t.$dialog.loading.close(),0===s.error_code?t.$dialog.toast({mes:"已发送",icon:"success",timeout:1e3}):2001===s.error_code&&t.$dialog.toast({mes:s.error_msg,icon:"none",timeout:1e3}),e.next=12;break;case 11:t.$dialog.toast({mes:"邮箱"+t.$refs.emailInput.errorMsg,icon:"error",timeout:1e3});case 12:case"end":return e.stop()}},e,t)}))()}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"register-container"},[s("div",{staticClass:"back-icon"},[s("span",{on:{click:t.goBack}},[s("i",{staticClass:"mui-icon mui-icon-back"})])]),t._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"}),t._v(" "),s("yd-input",{ref:"emailInput",attrs:{slot:"right",required:"",debug:!0,regex:"email",placeholder:"请输入邮箱"},slot:"right",model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"}),t._v(" "),s("yd-input",{attrs:{slot:"right",placeholder:"请输入邮箱验证码"},slot:"right",model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),t._v(" "),s("yd-sendcode",{attrs:{slot:"right",type:"warning","init-str":"获取验证码",second:"60","run-str":"{%s}秒后重新获取"},nativeOn:{click:function(e){return t.sendCode(e)}},slot:"right",model:{value:t.start,callback:function(e){t.start=e},expression:"start"}})],1),t._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"}),t._v(" "),s("yd-input",{attrs:{slot:"right",placeholder:"请输入学号"},slot:"right",model:{value:t.student_id,callback:function(e){t.student_id=e},expression:"student_id"}})],1),t._v(" "),s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"}),t._v(" "),s("yd-input",{attrs:{slot:"right",type:"password",placeholder:"请输入密码"},slot:"right",model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),s("div",{staticClass:"post-btn"},[s("mt-button",{attrs:{type:"primary",size:"large"},on:{click:t.register}},[t._v("注册")])],1),t._v(" "),s("div",{staticClass:"gologin",on:{click:t.goLogin}},[t._v("立即登录")])],1)},staticRenderFns:[]};var d=s("VU/8")(l,c,!1,function(t){s("dqVt")},"data-v-7711f72e",null);e.default=d.exports}});
//# sourceMappingURL=7.e3a72ff3af8b2c9f7b1d.js.map